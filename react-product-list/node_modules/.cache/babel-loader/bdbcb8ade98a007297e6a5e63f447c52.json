{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport EventPool from './EventPool';\n\nvar EventTarget =\n/*#__PURE__*/\nfunction () {\n  /** @private {Map<String,Function>} */\n\n  /** @private {Map<String,EventPool>} */\n\n  /**\n   * @param {HTMLElement} target\n   */\n  function EventTarget(target) {\n    _classCallCheck(this, EventTarget);\n\n    _defineProperty(this, \"handlers\", new Map());\n\n    _defineProperty(this, \"pools\", new Map());\n\n    _defineProperty(this, \"createEmitter\", function (eventType, eventPools) {\n      return function (event) {\n        eventPools.forEach(function (pool) {\n          pool.dispatchEvent(eventType, event);\n        });\n      };\n    });\n    /** @private */\n\n\n    this.target = target;\n  }\n  /**\n   * @param {String} poolName\n   * @param {String} eventType\n   * @param {Function[]} eventHandlers\n   */\n\n\n  _createClass(EventTarget, [{\n    key: \"addHandlers\",\n    value: function addHandlers(poolName, eventType, eventHandlers) {\n      this.removeTargetHandler(eventType);\n\n      if (!this.pools.has(poolName)) {\n        this.pools.set(poolName, EventPool.createByType(poolName, eventType, eventHandlers));\n      } else {\n        this.pools.set(poolName, this.pools.get(poolName).addHandlers(eventType, eventHandlers));\n      }\n\n      this.addTargetHandler(eventType);\n    }\n    /**\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.size > 0;\n    }\n    /**\n     * @param {String} poolName\n     * @param {String} eventType\n     * @param {Function[]} eventHandlers\n     */\n\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(poolName, eventType, eventHandlers) {\n      var pool = this.pools.get(poolName);\n\n      if (pool) {\n        var newPool = pool.removeHandlers(eventType, eventHandlers);\n\n        if (newPool.hasHandlers(eventType)) {\n          this.removeTargetHandler(eventType);\n          this.pools.set(poolName, newPool);\n        } else {\n          this.removeTargetHandler(eventType);\n          this.pools.delete(poolName);\n        }\n\n        if (this.pools.size > 0) this.addTargetHandler(eventType);\n      }\n    }\n    /**\n     * @private\n     * @param {String} eventType\n     * @param {Map<String,EventPool>} eventPools\n     * @return {Function}\n     */\n\n  }, {\n    key: \"addTargetHandler\",\n\n    /**\n     * @private\n     * @param {String} eventType\n     */\n    value: function addTargetHandler(eventType) {\n      var handler = this.createEmitter(eventType, this.pools);\n      this.handlers.set(eventType, handler);\n      this.target.addEventListener(eventType, handler);\n    }\n    /**\n     * @private\n     * @param {String} eventType\n     */\n\n  }, {\n    key: \"removeTargetHandler\",\n    value: function removeTargetHandler(eventType) {\n      if (this.handlers.has(eventType)) {\n        this.target.removeEventListener(eventType, this.handlers.get(eventType));\n        this.handlers.delete(eventType);\n      }\n    }\n  }]);\n\n  return EventTarget;\n}();\n\nexport { EventTarget as default };","map":null,"metadata":{},"sourceType":"module"}